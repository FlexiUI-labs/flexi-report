<div style="position: relative; display: flex; gap: 20px; font-family: 'IBM Plex Sans', sans-serif;">
    <div class="flex-report-setting-part">
        <div style="overflow: auto; padding: 0px 15px; margin-bottom: 30px;">
            <div>
                <p class="flexi-report-setting-title">Flexi Report</p>
                <hr>
                <div class="flexi-report-setting-button-part">
                    @if(isPreview()){
                        <flexi-button btnColor="warning" [title]="editText()" flexiTooltip="top" btnIcon="edit" [routerLink]="editPath()" />
                    }@else if(!isPreview() && reportSignal().id){
                        <flexi-button btnColor="info" [title]="newReportText()" flexiTooltip="top" btnIcon="new_window" (click)="onNewReport.emit()" />
                    }
                    <flexi-button btnColor="primary" [title]="previewText()" flexiTooltip="top" btnIcon="gallery_thumbnail" (click)="preview()" />
                    <flexi-button btnColor="danger" [title]="clearText()" flexiTooltip="top" btnIcon="ink_eraser" (click)="clear()" />
                    @if(!isPreview() && reportSignal().id){
                        <flexi-button btnColor="danger" [title]="deleteText()" flexiTooltip="top" btnIcon="delete" (click)="onDelete.emit(reportSignal().id)" />
                    }
                    <flexi-button btnColor="success" [title]="DonwloadAsPDFText()" flexiTooltip="top" btnIcon="browser_updated" (click)="downloadAsPDF()" />
                </div>
                @if(!isPreview()){
                    <hr>
                    <div class="flexi-report-setting-subtitle">{{ propertiesText() }}</div>
                    <div>
                        <strong>{{ endpointText() }}</strong>
                        <input style="width: 100%;" type="text" [(ngModel)]="reportSignal().endpoint" (change)="onEndpointChange.emit(reportSignal().endpoint)">
                    </div>
                    <div style="margin-top: 5px;">
                        <strong>{{ reportTitleText() }}</strong>
                        <input style="width: 100%;" type="text" [(ngModel)]="reportSignal().name">
                    </div>
                    <div style="margin-top: 5px;">
                        <flexi-button btnColor="info" [btnText]="saveText()" btnIcon="save" (click)="saveReport()" btnWidth="100%" />
                    </div>
                    <hr>
                    <div class="flexi-report-setting-subtitle">{{ pageSettingsText() }}</div>
                    <table class="flexi-report-table">
                        <tr>
                            <th>{{ pageSizeText() }}</th>
                            <td>
                                <select class="flexi-report-select" [(ngModel)]="reportSignal().pageSize" (change)="changePageSetting()">
                                    <option value="a4">A4</option>
                                    <option value="a5">A5</option>
                                    <option value="a6">A6</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>{{ pageOrientationText() }}</th>
                            <td>
                                <select class="flexi-report-select" [(ngModel)]="reportSignal().pageOrientation" (change)="changePageSetting()">
                                    <option value="portrait">{{ portraitText() }}</option>
                                    <option value="landscape">{{ landscapeText() }}</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>{{ pageFontFamilyText() }}</th>
                            <td>
                                <select class="flexi-report-select" [(ngModel)]="reportSignal().fontFamily">
                                    @for(family of fontFamilies(); track family){
                                        <option>{{family}}</option>
                                    }
                                </select>
                            </td>
                        </tr>
                    </table>
                    <hr>
                    <div>
                        <div class="flexi-report-setting-subtitle">{{ elementsText() }}</div>
                        <ul class="flexi-report-ul">
                            @for(el of elements(); track el){
                            <li>
                                <div class="flexi-report-cursor flexi-report-hover flexi-report-p-1" (click)="addElement(el)">
                                    {{el}}
                                </div>
                            </li>
                            }
                        </ul>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="flexi-report-style-part" #stylePart cdkDrag>
        <div style="position: relative;">
            <div class="flexi-report-setting-subtitle">
                {{ styleSettingsText() }}
                <div class="flexi-report-setting-close-btn">
                    <flexi-button btnSize="x-small" btnColor="danger" btnIcon="close" title="Close" (click)="closeStylePart()" />
                </div>
            </div>
            <table style="text-align: left; margin-bottom: 5px;" (mousedown)="$event.stopPropagation()">
                @if(style.elementType() !== "TABLE"){
                    <tr>
                        <th>Text</th>
                        <td>
                            <input class="flexi-report-input" [(ngModel)]="style.elementStyle().text" (input)="style.changeElementText()" />
                        </td>
                    </tr>
                }
                <tr>
                    <th>Width</th>
                    <td>
                        <input class="flexi-report-input" type="text" [(ngModel)]="style.elementStyle().width" (input)="style.changeElementWith()">
                    </td>
                </tr>
                @if(style.elementType() !== "TABLE"){
                    <tr>
                        <th>Text Align</th>
                        <td>
                            <select (change)="style.changeElementTextAlign()" [(ngModel)]="style.elementStyle().textAlign">
                                <option value="start">Start</option>
                                <option value="center">Center</option>
                                <option value="right">End</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <th>Font Size</th>
                        <td>
                          <input class="flexi-report-input" type="text" [(ngModel)]="style.elementStyle().fontSize" (input)="style.changeElementFontSize()" />
                        </td>
                    </tr>
                    <tr>
                        <th>Font Family</th>
                        <td>
                            <select class="flexi-report-input" [(ngModel)]="style.elementStyle().fontFamily" (change)="style.changeElementFontFamily()">
                                @for(family of fontFamilies(); track family){
                                    <option>{{family}}</option>
                                }
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <th>Font Weight</th>
                        <td>
                          <input class="flexi-report-input" type="text" [(ngModel)]="style.elementStyle().fontWeight" (input)="style.changeElementFontWeight()" />
                        </td>
                    </tr>
                    <tr>
                        <th>Text Decoration</th>
                        <td>
                            <select class="flexi-report-input" [(ngModel)]="style.elementStyle().textDecoration" (change)="style.changeElementTextDecoration()">
                                @for(decoration of textDecorations(); track decoration){
                                    <option>{{decoration}}</option>
                                }
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <th>Text Color</th>
                        <td>
                          <input class="flexi-report-input" type="color" [(ngModel)]="style.elementStyle().color" (input)="style.changeElementTextColor()" />
                        </td>
                    </tr>
                    <tr>
                        <th>Background Color</th>
                        <td>
                          <input class="flexi-report-input" type="color" [(ngModel)]="style.elementStyle().backgroundColor" (input)="style.changeElementBackgroundColor()" />
                        </td>
                    </tr>
                    <tr>
                        <th>Padding</th>
                        <td>
                          <input class="flexi-report-input" type="text" [(ngModel)]="style.elementStyle().padding" (input)="style.changeElementPadding()" />
                        </td>
                    </tr>
                    <tr>
                        <th>Margin</th>
                        <td>
                          <input class="flexi-report-input" type="text" [(ngModel)]="style.elementStyle().margin" (input)="style.changeElementMargin()" />
                        </td>
                    </tr>
                    <tr>
                        <th>Border Width</th>
                        <td>
                            <input class="flexi-report-input" (input)="style.changeElementBorder()" [(ngModel)]="style.elementStyle().borderWidth" />
                        </td>
                    </tr>
                    <tr>
                        <th>Border Style</th>
                        <td>
                            <select class="flexi-report-input" [(ngModel)]="style.elementStyle().borderStyle" (change)="style.changeElementBorder()">
                                @for(border of borderStles(); track border){
                                    <option>{{border}}</option>
                                }
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <th>Border Color</th>
                        <td>
                            <input class="flexi-report-input" type="color" (input)="style.changeElementBorder()" [(ngModel)]="style.elementStyle().borderColor" />
                        </td>
                    </tr>
                    <tr>
                        <th>Border Radius</th>
                        <td>
                          <input class="flexi-report-input" type="text" (input)="style.changeElementBorder()" [(ngModel)]="style.elementStyle().borderRadius" />
                        </td>
                    </tr>
                }@else{
                    <tr>
                        <th>Border Width</th>
                        <td>
                            <input class="flexi-report-input" (input)="style.changeTableBorder()" [(ngModel)]="style.elementStyle().borderWidth" />
                        </td>
                    </tr>
                    <tr>
                        <th>Border Style</th>
                        <td>
                            <select class="flexi-report-input" (change)="style.changeTableBorder()" [(ngModel)]="style.elementStyle().borderStyle" >
                                @for(border of borderStles(); track border){
                                    <option>{{border}}</option>
                                }
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <th>Border Color</th>
                        <td>
                            <input class="flexi-report-input" type="color" (input)="style.changeTableBorder()" [(ngModel)]="style.elementStyle().borderColor" />
                        </td>
                    </tr>
                    <tr>
                        <th>Border Radius</th>
                        <td>
                          <input class="flexi-report-input" type="text" (input)="style.changeTableBorder()" [(ngModel)]="style.elementStyle().borderRadius" />
                        </td>
                    </tr>
                }
            </table>

            <div style="text-align: center;">
                <flexi-button btnColor="danger" btnSize="medium" btnIcon="delete" [title]="deleteElementText()" (click)="deleteElement()" />
            </div>
            @if(style.elementType() === "TABLE"){
                <hr>
                <div style="max-height: 420px; overflow: auto; padding: 5px 25px;">
                    <div class="flexi-report-setting-subtitle">{{ tableHeadersSettingsText() }}</div>
                    <table style="margin-bottom: 5px; text-align: left;" (mousedown)="$event.stopPropagation()">
                        @for(head of tableHeads(); track head){
                            <tr>
                                <th>Value</th>
                                <td>
                                    <input class="flexi-report-input" [(ngModel)]="head.value" (input)="updateTableHeads()" />
                                </td>
                            </tr>
                            <tr>
                                <th>Width</th>
                                <td>
                                    <input class="flexi-report-input" [(ngModel)]="head.width" (input)="updateTableHeads()" />
                                </td>
                            </tr>
                            <tr>
                                <th>Text Align</th>
                                <td>
                                    <select class="flexi-report-input" (change)="updateTableHeads()" [(ngModel)]="head.textAlign">
                                        <option value="start">Start</option>
                                        <option value="center">Center</option>
                                        <option value="right">End</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <th>Property</th>
                                <td>
                                    <select class="flexi-report-input" [(ngModel)]="head.property" (change)="updateTableHeads()">
                                        <option value="">{{ noSelectText() }}</option>
                                        @for(val of properties(); track val){
                                        <option>{{val}}</option>
                                        }
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <th>#</th>
                                <td>
                                    <flexi-button btnColor="danger" btnSize="x-small" btnIcon="delete" [title]="deleteText()" (click)="deleteTableHead($index)"/>
                                </td>
                            </tr>
                            <tr>
                                <th colspan="2">
                                    <hr>
                                </th>
                            </tr>
                        }
                    </table>
                </div>
                <flexi-button btnColor="primary" btnSize="medium" btnIcon="add" [title]="addNewHeaderText()" (click)="addNewTableHead()" />
            }
        </div>
    </div>
    <div class="flex-report-content-part">
        <h1>Report Page</h1>
        <div style="border: 1px solid; position: relative; overflow: auto;" [style.width]="pageSetting().width"
            [style.height]="pageSetting().height" [style.width]="pageSetting().width" [style.fontFamily]="reportSignal().fontFamily">
            <div #pdfArea>
                <div #elementArea></div>
            </div>
        </div>
    </div>
</div>